<div *ngIf="loading" class="text-center">
  <div class="spinner-border" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>

<div *ngIf="!loading && job" class="container mt-4">
  <h2 class="mb-4">Edit Job</h2>
  <form #jobForm="ngForm" (ngSubmit)="updateJob(jobForm)" class="job-form">
    
    <div class="form-group">
      <div class="form-label-group">
        <label for="jobTitle">Job Title:</label>
        <i class="fas fa-briefcase"></i>
      </div>
      <input type="text" id="jobTitle" class="form-control" [(ngModel)]="job.jobTitle" name="jobTitle" required>
    </div>

    <div class="form-group">
      <div class="form-label-group">
        <label for="jobDescription">Job Description:</label>
        <i class="fas fa-align-left"></i>
      </div>
      <textarea id="jobDescription" class="form-control" [(ngModel)]="job.jobDescription" name="jobDescription" required></textarea>
    </div>

    <div class="form-group">
      <div class="form-label-group">
        <label for="employmentType">Employment Type:</label>
        <i class="fas fa-calendar-day"></i>
      </div>
      <select id="employmentType" class="form-control" [(ngModel)]="job.employmentType" name="employmentType" required>
        <option value="">Select Employment Type</option>
        <option value="Full-time">Full-time</option>
        <option value="Part-time">Part-time</option>
        <option value="Contract">Contract</option>
      </select>
    </div>

    <div class="form-group">
      <div class="form-label-group">
        <label for="salaryRange">Salary Range:</label>
        <i class="fas fa-money-bill-wave"></i>
      </div>
      <input type="text" id="salaryRange" class="form-control" placeholder="e.g. $90,000 - $120,000 or ₹9,00,000 - ₹10,20,000" [(ngModel)]="job.salaryRange" name="salaryRange">
    </div>

    <div class="form-group">
      <div class="form-label-group">
        <label for="location">Location:</label>
        <i class="fas fa-map-marker-alt"></i>
      </div>
      <input type="text" id="location" class="form-control" [(ngModel)]="job.location" name="location">
    </div>

    <div class="form-group">
      <div class="form-label-group">
        <label for="companyName">Company Name:</label>
        <i class="fas fa-building"></i>
      </div>
      <input type="text"   disabled id="companyName" class="form-control" [(ngModel)]="job.companyName" name="companyName" required>
    </div>

    <div class="form-group">
      <div class="form-label-group">
        <label for="jobStatus">Job Status:</label>
        <i class="fas fa-toggle-on"></i>
      </div>
      <select id="jobStatus" class="form-control" [(ngModel)]="job.jobStatus" name="jobStatus">
        <option value="Open">Open</option>
        <option value="Closed">Closed</option>
      </select>
    </div>

    <div class="form-group">
      <div class="form-label-group">
        <label for="applicationDeadline">Application Deadline:</label>
        <i class="fas fa-calendar-alt"></i>
      </div>
      <input 
        type="date" 
        id="applicationDeadline" 
        class="form-control" 
        [(ngModel)]="job.applicationDeadline" 
        name="applicationDeadline" 
        [min]="minDate">
    </div>

    <div class="form-group">
      <div class="form-label-group">
        <label for="experienceLevel">Experience Level:</label>
        <i class="fas fa-star"></i>
      </div>
      <select id="experienceLevel" class="form-control" [(ngModel)]="job.experienceLevel" name="experienceLevel">
        <option value="Entry Level (0-1 year)">Entry Level (0-1 year)</option>
        <option value="Mid Level (2-5 years)">Mid Level (2-5 years)</option>
        <option value="Senior Level (5-10 years)">Senior Level (5-10 years)</option>
        <option value="Manager (10-15 years)">Manager (10-15 years)</option>
        <option value="Director (15+ years)">Director (15+ years)</option>
      </select>
    </div>

    <button type="submit" class="btn btn-primary">Update Job</button>
  </form>
</div>

<div *ngIf="errorMessage" class="alert alert-danger mt-3">{{ errorMessage }}</div>
